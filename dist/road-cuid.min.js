!function(e){"use strict";var t="cuid",n=0,o=4,r=36,i=Math.pow(r,o),f=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},c=function(){return f((Math.random()*i<<0).toString(r),o)},u=function(){return n=i>n?n:0,n++,n-1},a=function(){var n,e="c",t=(new Date).getTime().toString(r),i=a.fingerprint(),d=c()+c();return n=f(u().toString(r),o),e+t+n+i+d};a.slug=function(){var t,e=(new Date).getTime().toString(36),n=a.fingerprint().slice(0,1)+a.fingerprint().slice(-1),o=c().slice(-2);return t=u().toString(36).slice(-4),e.slice(-2)+t+n+o},a.globalCount=function(){var e=function(){var e,t=0;for(e in window)t++;return t}();return a.globalCount=function(){return e},e},a.fingerprint=function(){return f((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+a.globalCount().toString(36),4)},e.register?e.register(t,a):"undefined"!=typeof module?module.exports=a:e[t]=a}(this.applitude||this);var road=function(){function n(e,t){try{for(var n in e)t.hasOwnProperty(n)&&(t[n]=e[n])}catch(o){throw o}}function o(e){if(!e)throw"Missing cuid";if("number"==typeof e)throw"cuid value should be String"}function i(){function e(e){(r=r||function(){})(e)}function t(){return r}function n(e){e=e||function(){},r=e}return{execute:e,getObservable:t,setObservable:n}}function f(t,n,o){try{n=n||{},n.sendBack=n.sendBack||!1,o=o||"new";var r=0;if(!t)throw"Missing object to be included";if(r=t.length||1,r>1)for(var f=0;r>f;f++){"recovered"!=o&&(t[f].cuid=cuid()),t[f].status=o;var c={};$.extend(c,t[f]),e.push(c),"function"==typeof n.ok&&n.ok(c),runAsync(i().execute,[{action:"Added",obj:$.extend({},c),cuid:c.cuid}])}else{"recovered"!=o&&(t.cuid=cuid()),t.status=o;var c={};$.extend(c,t),e.push(c),"function"==typeof n.ok&&n.ok(c),runAsync(i().execute,[{action:"Added",obj:$.extend({},c),cuid:c.cuid}])}if(n.sendBack)return t;"function"==typeof n.end&&n.end(t)}catch(u){throw"function"==typeof n.err&&n.err(u),u}}function c(n,r){try{if(r=r||{},o(n),0==p())throw"No data in memory";var f=e.map(function(e){return e.cuid}).indexOf(n);if(!(f>=0))return null;var c=y(n);c.status="removed",t.push(c),e.splice(f,1),"function"==typeof r.ok&&r.ok(c),runAsync(i().execute,[{action:"Removed",obj:$.extend({},c),cuid:c.cuid}]),"function"==typeof r.end&&r.end()}catch(u){throw"function"==typeof r.err&&r.err(u),u}}function u(e,t,o){try{if(o=o||{},!e)throw"Missing object";if(t&&"number"==typeof t)throw"cuid value should be String";var r=0;if(!e)throw"Missing object to be included";if(r=e.length||1,r>1)for(var f=0;r>f;f++){if(!e[f].cuid)throw"For array updates it is required the cuid property on each object.";var c=y(e[f].cuid,!1);if(void 0==c)throw"No item found for cuid "+t.toString();n(e[f],c),c.status="changed","function"==typeof o.ok&&o.ok(c),runAsync(i().execute,[{action:"Updated",obj:$.extend({},c),cuid:c.cuid}])}else{if(!e.cuid&&!t)throw"Missing cuid";!t&&e.cuid&&(t=t||e.cuid);var c=y(t.toString(),!1);if(void 0==c)throw"No item found for cuid "+t.toString();n(e,c),c.cuid=t.toString(),c.status="changed","function"==typeof o.ok&&o.ok(c),runAsync(i().execute,[{action:"Updated",obj:$.extend({},c),cuid:c.cuid}])}"function"==typeof o.end&&o.end()}catch(u){throw"function"==typeof o.err&&o.err(u),u}}function a(e,t){try{t=t||{},o(e);var n=y(e,!1);if(void 0==n||n==[])throw"No item found for cuid "+e.toString();n.cuid=e,n.status="deleted","function"==typeof t.ok&&t.ok(n),runAsync(i().execute,[{action:"Deleted",obj:$.extend({},n),cuid:n.cuid}]),"function"==typeof t.end&&t.end()}catch(r){throw"function"==typeof t.err&&t.err(r),r}}function d(t,n){try{n=n||{},e=[],e=f(t,{sendBack:!0},"origin"),"function"==typeof n.ok&&n.ok(e),runAsync(i().execute,[{action:"Set Data",obj:$.extend({},e),cuid:null}]),"function"==typeof n.end&&n.end()}catch(o){throw"function"==typeof n.err&&n.err(o),o}}function s(t){try{return t=t||{},"function"==typeof t.ok&&t.ok(e),"function"==typeof t.end&&t.end(),e}catch(n){throw"function"==typeof t.err&&t.err(n),n}}function y(t,n,r){try{r=r||{},void 0==n&&(n=!0),o(t);var i=e.filter(function(e){return e.cuid==t})[0];if(!i)throw"No item found for cuid "+t;if(n){var f={};return $.extend(f,i),"function"==typeof r.ok&&r.ok(f),"function"==typeof r.end&&r.end(),f}return"function"==typeof r.ok&&r.ok(i),"function"==typeof r.end&&r.end(),i}catch(c){throw"function"==typeof r.err&&r.err(c),c}}function p(t){try{return t=t||{},"function"==typeof t.ok&&t.ok(e.length),"function"==typeof t.end&&t.end(),e.length}catch(n){throw"function"==typeof t.err&&t.err(n),n}}function l(t,n){try{n=n||{};var o=[],r=[];return $.extend(r,e),r.forEach(function(e){t(e)&&("function"==typeof n.ok&&n.ok(e),o.push(e))}),"function"==typeof n.end&&n.end(o),o}catch(i){throw"function"==typeof n.err&&n.err(i),i}}function h(t,n){try{n=n||{};var r=[];$.extend(r,e);var i=r.map(t);return"function"==typeof n.ok&&n.ok(i),"function"==typeof n.end&&n.end(),i}catch(f){throw"function"==typeof n.err&&n.err(f),f}}function v(t,n){try{n=n||{};if(void 0==t)throw"Missing property name.";if("string"!=typeof t||0==t.length)throw"Property name should be String";var r=[];$.extend(r,e);var i=r.map(function(e){return e[t]}).distinct();return"function"==typeof n.ok&&n.ok(i),"function"==typeof n.end&&n.end(),i}catch(f){throw"function"==typeof n.err&&n.err(f),f}}function g(e){try{return e=e||{},"function"==typeof e.ok&&e.ok(t),"function"==typeof e.end&&e.end(),t}catch(n){throw"function"==typeof e.err&&e.err(n),n}}function w(e,n,r){try{r=r||{},void 0==n&&(n=!0),o(e);var i=t.filter(function(t){return t.cuid==e})[0];if(!i)throw"No item found for cuid "+e;if(n){var f={};return $.extend(f,i),"function"==typeof r.ok&&r.ok(f),"function"==typeof r.end&&r.end(),f}return"function"==typeof r.ok&&r.ok(i),"function"==typeof r.end&&r.end(),i}catch(c){throw"function"==typeof r.err&&r.err(c),c}}function k(e){try{e=e||{},"function"==typeof e.ok&&e.ok(),runAsync(i().execute,[{action:"Clean Removed",obj:{},cuid:null}]),"function"==typeof e.end&&e.end(),t=[]}catch(n){throw"function"==typeof e.err&&e.err(n),n}}function m(e){try{return e=e||{},"function"==typeof e.ok&&e.ok(t.length),"function"==typeof e.end&&e.end(),t.length}catch(n){throw"function"==typeof e.err&&e.err(n),n}}function S(e,n){try{if(n=n||{},o(e),0==m())throw"No data in memory";var r=w(e),f=t.map(function(e){return e.cuid}).indexOf(e);if(!(f>=0))return null;t.splice(f,1),"function"==typeof n.ok&&n.ok(r),runAsync(i().execute,[{action:"Destroyed",obj:$.extend({},r),cuid:r.cuid}]),"function"==typeof n.end&&n.end()}catch(c){throw"function"==typeof n.err&&n.err(c),c}}function x(e,t){try{if(t=t||{},o(e),0==m())throw"No data in memory";var n=w(e);if(!n)throw"No item found for cuid "+e.toString();f(n,null,"recovered"),S(e),"function"==typeof t.ok&&t.ok(n),runAsync(i().execute,[{action:"Recovered",obj:$.extend({},n),cuid:n.cuid}]),"function"==typeof t.end&&t.end()}catch(r){throw"function"==typeof t.err&&t.err(r),r}}function b(e){try{if(e=e||{},0==m())throw"No data in memory";for(var n=0;n<m();n++)f(t[n],null,"recovered"),"function"==typeof e.ok&&e.ok(t[n]);runAsync(i().execute,[{action:"Recovered All",obj:$.extend({},t),cuid:null}]),k(),"function"==typeof e.end&&e.end()}catch(o){throw"function"==typeof e.err&&e.err(o),o}}function N(e,n){try{n=n||{};var o=[],r=[];return $.extend(r,t),r.forEach(function(t){e(t)&&("function"==typeof n.ok&&n.ok(t),o.push(t))}),"function"==typeof n.end&&n.end(o),o}catch(i){throw"function"==typeof n.err&&n.err(i),i}}function O(e,n){try{n=n||{};var r=[];$.extend(r,t);var i=r.map(e);return"function"==typeof n.ok&&n.ok(i),"function"==typeof n.end&&n.end(),i}catch(f){throw"function"==typeof n.err&&n.err(f),f}}function j(e,n){try{n=n||{};if(void 0==e)throw"Missing property name.";if("string"!=typeof e||0==e.length)throw"Property name should be String";var r=[];$.extend(r,t);var i=r.map(function(t){return t[e]}).distinct();return"function"==typeof n.ok&&n.ok(i),"function"==typeof n.end&&n.end(),i}catch(f){throw"function"==typeof n.err&&n.err(f),f}}function A(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){throw"function"==typeof fun.err&&fun.err(e),e}}function M(n){try{if(n=n||{},!A())throw"No local storage supported.";localStorage.live=JSON.stringify(e),localStorage.removed=JSON.stringify(t),"function"==typeof n.ok&&n.ok(),"function"==typeof n.end&&n.end()}catch(o){throw"function"==typeof n.err&&n.err(o),o}}function J(n){try{if(n=n||{},!A())throw"No local storage supported.";e=[],t=[],e=JSON.parse(localStorage.live),t=JSON.parse(localStorage.removed),"function"==typeof n.ok&&n.ok(),"function"==typeof n.end&&n.end()}catch(o){throw"function"==typeof n.err&&n.err(o),o}}function T(e){try{if(e=e||{},!A())throw"No local storage supported.";localStorage.live=null,localStorage.removed=null,"function"==typeof e.ok&&e.ok(),"function"==typeof e.end&&e.end()}catch(t){throw"function"==typeof e.err&&e.err(t),t}}function R(t,n){try{n=n||{};var o={};if(!t)throw"Missing ajax url parameter";o.async=!1,o.method="GET",o.url=t,e=[];var r=$.ajax(o).responseText;if("[]"==r)return;"string"==typeof r&&(r=JSON.parse(r)),1==r.length?f(r[0],{},"origin"):f(r,{},"origin"),"function"==typeof n.ok&&n.ok(r),"function"==typeof n.end&&n.end()}catch(i){throw"function"==typeof n.err&&n.err(i),i}}function D(t,n,o){try{o=o||{};var r={};if(void 0==n&&(n=!1),!t)throw"Missing ajax url parameter";if(!e||e==[])throw"No data found.";r.data=0==n?{data:e}:JSON.stringify(e),r.async=!1,r.method="POST",r.url=t;var i=$.ajax(r).responseText;return"function"==typeof o.ok&&o.ok(i),"function"==typeof o.end&&o.end(),i}catch(f){throw"function"==typeof o.err&&o.err(f),f}}function P(n,o,r,i){try{i=i||{};var f={};if(void 0==r&&(r=!1),!n)throw"Missing ajax url parameter";if(!e||e==[]&&!t||t==[])throw"No data found.";var c=[];l(o).forEach(function(e){c.push(e)}),N(o).forEach(function(e){c.push(e)}),f.data=0==r?{data:c.map(o)}:JSON.stringify(c.map(o)),f.async=!1,f.method="POST",f.url=n;var u=$.ajax(f).responseText;return"function"==typeof i.ok&&i.ok(u),"function"==typeof i.end&&i.end(),u}catch(a){throw"function"==typeof i.err&&i.err(a),a}}function B(e,n,o){try{o=o||{};var r={};if(void 0==n&&(n=!1),!e)throw"Missing ajax url parameter";if(!t||t==[])throw"No data found.";r.data=0==n?{data:t}:JSON.stringify(t),r.async=!1,r.method="POST",r.url=e;var i=$.ajax(r).responseText;return"function"==typeof o.ok&&o.ok(i),"function"==typeof o.end&&o.end(),i}catch(f){throw"function"==typeof o.err&&o.err(f),f}}function C(n,o,r,i){try{i=i||{};var f={};if(void 0==r&&(r=!1),!n)throw"Missing ajax url parameter";if(!o)throw"Missing filter criteria parameter";if(!e||e==[]&&!t||t==[])throw"No data found.";var c=[];l(o).forEach(function(e){c.push(e)}),N(o).forEach(function(e){c.push(e)}),f.data=0==r?{data:c}:JSON.stringify(c),f.async=!1,f.method="POST",f.url=n;var u=$.ajax(f).responseText;return"function"==typeof i.ok&&i.ok(u),"function"==typeof i.end&&i.end(),u}catch(a){throw"function"==typeof i.err&&i.err(a),a}}function E(e,t,n,r){try{r=r||{};var i={};if(o(e),void 0==n&&(n=!1),!t)throw"Missing ajax url parameter";var f="";try{f=y(e)}catch(c){f=w(e)}if("string"==typeof f)throw"No item found for cuid "+e;i.data=0==n?f:JSON.stringify(f),i.async=!1,i.method="POST",i.url=t;var u=$.ajax(i).responseText;return"function"==typeof r.ok&&r.ok(f,u),"function"==typeof r.end&&r.end(u),u}catch(c){throw"function"==typeof r.err&&r.err(c),c}}function U(e){var t=+new Date;e();var n=+new Date;return n-t}var e=[],t=[];Array.prototype.unique=function(){var e=JSON.stringify(this);e=JSON.parse(e);var t=JSON.stringify(this);return e.forEach(function(n){var o=t.indexOf(JSON.stringify(n)),r=t.indexOf(JSON.stringify(n),o+JSON.stringify(n).length);r>-1&&e.splice(e.indexOf(n),1)}),e},Array.prototype.distinct=function(){var t,n,o,e=[this[0]];for(t=1;t<this.length;t++){for(o=1,n=0;n<e.length;n++)if(this[t]==e[n]){o=0;break}o&&e.push(this[t])}return e},window.runAsync=function(e,t,n,o){var r={fn:e,arguments:t,callback:n};setTimeout(function(){r.callback=r.callback||function(){},r.callback(r.fn.apply(void 0,r.arguments))},void 0==o?0:o)};var r=void 0;return{add:f,remove:c,update:u,"delete":a,setData:d,getAll:s,getByCUID:y,length:p,filter:l,map:h,uniqueProp:v,getAllRemoved:g,getRemovedByCUID:w,cleanRemoved:k,lengthRemoved:m,destroyRemovedByCUID:S,recoverRemovedByCUID:x,recoverAllRemoved:b,filterRemoved:N,mapRemoved:O,uniquePropRemoved:j,isLocalStorageSupported:A,saveLocalStorage:M,loadLocalStorage:J,cleanLocalStorage:T,serverLoad:R,serverSendAll:D,serverSendAllMap:P,serverSendAllRemoved:B,serverSendFilter:C,serverSendByCUID:E,performance:U,observe:i()}};